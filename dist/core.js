(()=>{"use strict";var e,n,t,i,o,l,a={784:(e,n,t)=>{t.a(e,(async(e,i)=>{try{t.d(n,{g:()=>d});var o=t(99),l=t(675),a=t(687),s=e([o,a]);function d(){$("#lssp-button").on("click",(()=>{!async function(){a.sw.open(),await(0,l._Y)(o.db).then((e=>e.sort(((e,n)=>e.name.localeCompare(n.name))))).then((e=>e.sort().forEach((e=>{$("#lssp-modal-dash-table-body").append(`\n                    <tr>\n                    <td>\n                    <img\n                            src="${o.e[e.type].icon}"\n                            alt="icon ${o.e[e.type].caption}"\n                            />\n                    </td>\n                    <td><a id="lssp-modal-dash-table-body-link">${e.name}</a></td>\n                                        <td>${o.e[e.type].caption}</td>\n                </tr>`);let n=document.querySelectorAll("#lssp-modal-dash-table-body-link");n[n.length-1].addEventListener("click",(()=>{console.log(e),a.s3.openWithData(e)}))}))))}()}))}[o,a]=s.then?(await s)():s,i()}catch(r){i(r)}}))},99:(e,n,t)=>{var i;t.a(e,(async(e,o)=>{try{t.d(n,{db:()=>p,e:()=>u});var l=t(675),a=t(840),s=t(423),d=t(784),r=t(232),c=e([d,r]);[d,r]=c.then?(await c)():c;const u=i||(i=t.t(a,2)),p=await(0,l.q4)();async function b(){(0,s.i8)("Starting..."),(0,s.EH)(),(0,s.s3)(),(0,d.g)(),(0,r.I)()}b(),o()}catch(m){o(m)}}),1)},675:(e,n,t)=>{function i(){return new Promise(((e,n)=>{const t=indexedDB.open(sessionStorage.getItem("dbName")||"LSS-Planner",3);t.onerror=()=>{n(t.error)},t.onsuccess=()=>{e(t.result)},t.onupgradeneeded=e=>{const n=e.target.result.createObjectStore("buildings",{keyPath:"id",autoIncrement:!0});n.createIndex("id","id",{unique:!0}),n.createIndex("name","name",{unique:!1}),n.createIndex("type","type",{unique:!1})}}))}function o(e,n){return new Promise(((t,i)=>{const o=e.transaction(["buildings"],"readonly").objectStore("buildings").get(n);o.onerror=()=>{i(o.error)},o.onsuccess=()=>{t(o.result)}}))}function l(e){return new Promise(((n,t)=>{const i=e.transaction(["buildings"],"readonly").objectStore("buildings").getAll();i.onerror=()=>{t(i.error)},i.onsuccess=()=>{n(i.result)}}))}t.d(n,{Ks:()=>o,_Y:()=>l,q4:()=>i})},560:(e,n,t)=>{t.a(e,(async(e,i)=>{try{t.d(n,{c:()=>d});var o=t(687),l=t(675),a=t(99),s=e([o,a]);[o,a]=s.then?(await s)():s;class d{lat;lng;building_ID;name;icon;marker;constructor(e){this.building_ID=e.id,this.lat=e.lat,this.lng=e.lng,this.name=e.name,this.marker=this.setMarker(),this.icon=this.setIcon(a.e[e.type].icon)}getLatLng(){return[this.lat,this.lng]}setMarker(){return this.marker=L.marker([this.lat,this.lng],{title:this.name,opacity:.6}).on("click",(async()=>{o.s3.openWithData(await(0,l.Ks)(a.db,this.building_ID))})).addTo(map).bindTooltip(this.name),this.marker}setIcon(e){return this.icon=L.icon({iconUrl:e,iconSize:[32,37],iconAnchor:[16,37]}),this.marker.setIcon(this.icon),this.icon}}i()}catch(e){i(e)}}))},423:(e,n,t)=>{function i(e){console.log(`[${sessionStorage.getItem("scriptName")||"LSS-Planner"}]: `+e)}function o(){let e=document.createElement("li");e.setAttribute("class","divider"),e.setAttribute("role","presentation"),document.getElementById("logout_button")?.parentElement?.parentElement?.appendChild(e);let n=document.createElement("a");n.setAttribute("href","javascript: void(0)"),n.setAttribute("id","lssp-button"),n.append("Lss-Planner");let t=document.createElement("li");t.appendChild(n),document.getElementById("logout_button")?.parentElement?.parentElement?.appendChild(t)}function l(){$.getJSON("../api/buildings",(function(e){(e=e.filter((e=>7==e.building_type))).forEach((e=>{$("#lssp-building-modal-building-leitstelle").append(`<option value="${e.id}">${e.caption}</option>`)}))}))}t.d(n,{EH:()=>l,i8:()=>i,s3:()=>o})},232:(e,n,t)=>{t.a(e,(async(e,i)=>{try{t.d(n,{I:()=>d});var o=t(99),l=t(675),a=t(560),s=e([o,a]);async function d(){var e=[];return(await(0,l._Y)(o.db)).forEach((n=>e.push(new a.c(n)))),e}[o,a]=s.then?(await s)():s,i()}catch(r){i(r)}}))},759:(e,n,t)=>{t.a(e,(async(e,i)=>{try{t.d(n,{o:()=>s,w:()=>a});var o=t(99),l=e([o]);o=(l.then?(await l)():l)[0];class a{name;constructor(e,n){this.name=e;const t=document.createElement("div");t.className="modal fade",t.id=e,t.setAttribute("tabindex","-1"),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby","lssp-modal-label"),t.setAttribute("aria-hidden","true"),t.style.zIndex="5000",t.innerHTML=n,document.body.appendChild(t)}close(){$("#"+this.name).modal("hide")}open(){$("#"+this.name).modal("show")}}class s extends a{openWithData(e){this.open(),document.getElementById("lssp-building-modal-form")?.setAttribute("data",JSON.stringify(e));let n=document.getElementById("lssp-building-modal-body-title");n&&(n.innerHTML=`${e.name}`);let t=document.getElementById("lssp-building-modal-body-type");t&&(t.innerHTML=`${o.e[e.type].caption}`);let i=document.getElementById("lssp-building-modal-body-lat");i&&(i.innerHTML=`Latitude: ${e.lat}`);let l=document.getElementById("lssp-building-modal-body-lng");l&&(l.innerHTML=`Longitude: ${e.lng}`);let a=document.getElementById("lssp-building-modal-body-leitstelle");$.getJSON("../api/buildings",(function(n){n=n.filter((n=>n.id==e.leitstelle)),a&&(a.innerHTML=`Leitstelle: ${n[0]?.caption||""}`)}))}}i()}catch(e){i(e)}}))},536:(e,n,t)=>{t.d(n,{e:()=>i});const i='\n<div class="modal-dialog modal-lg" role="document" style="width: 95%; margin: 40px auto">\n    <div class="modal-content" action="">\n        <div class="modal-header">\n            <h1 class="modal-title" id="lssp-building-edit-modal-label">LSS-Planner</h1>\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n        <form id="lssp-building-edit-modal-form">\n            <div id="lssp-building-edit-modal-body" class="modal-body"\n                style="height: calc(100vh - 350px); overflow-y: auto">\n                <div class="col-md-12 col-xs-12">\n                    <div id="building_name_step">\n                        <div class="input-group string required building_name">\n                            <div class="input-group-addon">\n                                <label class="string required" for="building_name"><abbr title="required">*</abbr>\n                                    Name</label>\n                            </div>\n                            <input class="string required form-control" id="lssp-building-modal-building-name"\n                                maxlength="40" name="building[name]" size="50" type="text" control-id="ControlID-14" />\n                        </div>\n                    </div>\n                    <div class="input-group select required building_building_type">\n                        <div class="input-group-addon">\n                            <label class="integer required select required"\n                                for="lssp-building-modal-building-type"><abbr title="required">*</abbr>\n                                Gebäudetyp</label>\n                        </div>\n\n                        <select class="select required form-control" id="lssp-building-modal-building-type"\n                            name="building[building_type]">\n                            <option value=""></option>\n                            <option value="7">Leitstelle</option>\n                            <option value="0">Feuerwache</option>\n                            <option value="18">Feuerwache (Kleinwache)</option>\n                            <option value="1">Feuerwehrschule</option>\n                            <option value="2">Rettungswache</option>\n                            <option value="20">Rettungswache (Kleinwache)</option>\n                            <option value="3">Rettungsschule</option>\n                            <option value="4">Krankenhaus</option>\n                            <option value="5">Rettungshubschrauber-Station</option>\n                            <option value="12">Schnelleinsatzgruppe (SEG)</option>\n                            <option value="6">Polizeiwache</option>\n                            <option value="19">Polizeiwache (Kleinwache)</option>\n                            <option value="11">Bereitschaftspolizei</option>\n                            <option value="17">Polizei-Sondereinheiten</option>\n                            <option value="24">Reiterstaffel</option>\n                            <option value="13">Polizeihubschrauberstation</option>\n                            <option value="8">Polizeischule</option>\n                            <option value="9">THW</option>\n                            <option value="10">THW Bundesschule</option>\n                            <option value="14">Bereitstellungsraum</option>\n                            <option value="15">Wasserrettung</option>\n                            <option value="21">Rettungshundestaffel</option>\n                        </select>\n                    </div>\n                    <div class="input-group select required building_building_type">\n                        <div class="input-group-addon">\n                            <label class="integer optional select required"\n                                for="lssp-building-modal-building-leitstelle">Zugeordnete Leitstelle</label>\n                        </div>\n                        <select class="select required form-control" id="lssp-building-modal-building-leitstelle"\n                            name="building[building_type]">\n                            <option value=""></option>\n                        </select>\n                    </div>\n                </div>\n                <button type="submit" id="lssp-building-edit-modal-form-submit" class="btn btn-default">\n                    Speichern\n                </button>\n            </div>\n        </form>\n    </div>\n</div>'},552:(e,n,t)=>{t.d(n,{o:()=>i});const i='<div class="modal-dialog modal-lg" role="document" style="width: 95%; margin: 40px auto">\n<div class="modal-content" action="">\n    <div class="modal-header">\n        <h1 class="modal-title" id="lssp-building-modal-label">LSS-Planner</h1>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n        </button>\n    </div>\n    <form id="lssp-building-modal-form">\n        <div id="lssp-building-modal-body" class="modal-body" style="height: calc(100vh - 350px); overflow-y: auto">\n            <div>\n                <h1 id="lssp-building-modal-body-title"></h1>\n                <p id="lssp-building-modal-body-type"></p>\n            </div>\n            <p id="lssp-building-modal-body-leitstelle">Leitstelle:</p>\n            <p id="lssp-building-modal-body-lat">Latitude:</p>\n            <p id="lssp-building-modal-body-lng">Longitude:</p>\n            <button type="submit" id="lssp-building-modal-form-build" class="btn btn-success">Bauen</button>\n            <button type="submit" id="lssp-building-modal-form-submit" class="btn btn-default">Bearbeiten</button>\n            <button type="submit" id="lssp-building-modal-form-delete" data-confirm="Wirklich Löschen?"\n                data-method="delete" class="btn btn-danger">Löschen</button>\n        </div>\n    </form>\n</div>\n</div>'},687:(e,n,t)=>{t.a(e,(async(e,i)=>{try{t.d(n,{s3:()=>c,sw:()=>r});var o=t(759),l=t(536),a=t(552),s=t(920),d=e([o]);const r=new((o=(d.then?(await d)():d)[0]).w)("lssp-modal",s.O),c=new o.o("lssp-building-modal",a.o);new o.w("lssp-building-edit-modal",l.e),i()}catch(e){i(e)}}))},920:(e,n,t)=>{t.d(n,{O:()=>i});const i='<div\n    class="modal-dialog modal-lg"\n    role="document"\n    style="width: 95%; margin: 40px auto"\n>\n    <div class="modal-content" action="">\n        <div class="modal-header">\n            <h1 class="modal-title" id="lssp-modal-label">LSS-Planner</h1>\n            <button\n                type="button"\n                class="close"\n                data-dismiss="modal"\n                aria-label="Close"\n            >\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n        <div\n            id="lssp-modal-body"\n            class="modal-body"\n            style="height: calc(100vh - 350px); overflow-y: auto"\n        >\n            <div>\n                <ul class="nav nav-tabs" role="tablist" style="margin-bottom: 10px">\n                    <li role="presentation" class="active">\n                        <a\n                            href="#lssp-modal-dash-panel"\n                            aria-controls="lssp-modal-dash-panel"\n                            role="tab"\n                            data-toggle="tab"\n                        >\n                            Übersicht\n                        </a>\n                    </li>\n                    <li role="presentation">\n                        <a\n                            href="#lssp-modal-backup-panel"\n                            aria-controls="lssp-modal-backup-panel"\n                            role="tab"\n                            data-toggle="tab"\n                        >\n                            BackUp\n                        </a>\n                    </li>\n                </ul>\n                <div class="tab-content">\n                    <div\n                        role="tabpanel"\n                        class="tab-pane active"\n                        id="lssp-modal-dash-panel"\n                    >\n                        <table\n                            id="lssp-modal-dash-table"\n                            class="table table-striped tablesorter tablesorter-default"\n                            role="grid"\n                        >\n                            <thead>\n                                <tr class="tablesorter-headerRow" role="row">\n                                    <th></th>\n                                    <th>Name</th>\n                                    <th>Typ</th>\n                                </tr>\n                            </thead>\n                            <tbody\n                                id="lssp-modal-dash-table-body"\n                                aria-live="polite"\n                                aria-relevant="all"\n                            ></tbody>\n                        </table>\n                    </div>\n                    <div role="tabpanel" class="tab-pane" id="lssp-modal-backup-panel">\n                        <div>\n                            <h2>JSON-Datei</h2>\n                            <input\n                                type="file"\n                                id="lssp-modal-selectFiles"\n                                value="Import"\n                            /><br />\n                            <button id="lssp-modal-import" class="btn btn-default">\n                                Importieren\n                            </button>\n                            <button id="lssp-modal-export" class="btn btn-success">\n                                Herunterladen\n                            </button>\n                        </div>\n                        <div>\n                            <h2>Notizen</h2>\n                            <button id="lssp-modal-export-notes" class="btn btn-success">\n                                in Notizen Exportieren\n                            </button>\n                            <button id="lssp-modal-import-notes" class="btn btn-success">\n                                aus Notizen Importieren\n                            </button>\n                        </div>\n                        <div>\n                            <h2>Zu Importierende Daten</h2>\n\n                            <table\n                                class="table table-striped tablesorter tablesorter-default"\n                            >\n                                <thead>\n                                    <tr class="tablesorter-headerRow" role="row">\n                                        <th></th>\n                                        <th>Name</th>\n                                        <th>Typ</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="lssp-modal-body-output"></tbody>\n                            </table>\n                            <button\n                                id="lssp-modal-import-save"\n                                class="btn btn-success"\n                                type="button"\n                            >\n                                Speichern\n                            </button>\n                            <button id="lssp-modal-delete" class="btn btn-danger">\n                                Alles Löschen\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},840:e=>{e.exports=JSON.parse('{"0":{"icon":"/images/building_fire_other.png","caption":"Feuerwache"},"1":{"icon":"/images/building_fireschool_other.png","caption":"Feuerwehrschule"},"2":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungswache"},"3":{"icon":"/images/building_rettungsschule_other.png","caption":"Rettungsschule"},"4":{"icon":"/images/building_hospital_other.png","caption":"Krankenhaus"},"5":{"icon":"/images/building_helipad_other.png","caption":"Rettungshubschrauber-Station"},"6":{"icon":"/images/building_polizeiwache_other.png","caption":"Polizeiwache"},"7":{"icon":"/images/building_leitstelle_other.png","caption":"Leitstelle"},"8":{"icon":"/images/building_polizeischule_other.png","caption":"Polizeischule"},"9":{"icon":"/images/building_thw_other.png","caption":"THW"},"10":{"icon":"/images/building_thw_school_other.png","caption":"THW Bundesschule"},"11":{"icon":"/images/building_bereitschaftspolizei_other.png","caption":"Bereitschaftspolizei"},"12":{"icon":"/images/building_seg_other.png","caption":"Schnelleinsatzgruppe (SEG)"},"13":{"icon":"/images/building_helipad_polizei_other.png","caption":"Polizeihubschrauberstation"},"14":{"icon":"/images/building_bereitstellungsraum_other.png","caption":"Bereitstellungsraum"},"15":{"icon":"/images/building_wasserwacht_other.png","caption":"Wasserrettung"},"16":{"icon":"/images/building_polizeiwache_other.png","caption":"Verbandszellen"},"17":{"icon":"/images/building_polizeisondereinheiten_other.png","caption":"Polizei-Sondereinheiten"},"18":{"icon":"/images/building_fire_other.png","caption":"Feuerwache (Kleinwache)"},"19":{"icon":"/images/building_polizeiwache_other.png","caption":"Polizeiwache (Kleinwache)"},"20":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungswache (Kleinwache)"},"21":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungshundestaffel"},"22":{"icon":"/images/building_complex_other.png","caption":"Großer Komplex"},"23":{"icon":"/images/building_complex_other.png","caption":"Kleiner Komplex"},"24":{"icon":"/images/building_police_horse_other.png","caption":"Reiterstaffel"}}')}},s={};function d(e){var n=s[e];if(void 0!==n)return n.exports;var t=s[e]={exports:{}};return a[e](t,t.exports,d),t.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",n="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",t="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},d.a=(o,l,a)=>{var s;a&&((s=[]).d=-1);var d,r,c,u=new Set,p=o.exports,b=new Promise(((e,n)=>{c=n,r=e}));b[n]=p,b[e]=e=>(s&&e(s),u.forEach(e),b.catch((e=>{}))),o.exports=b,l((o=>{var l;d=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var l=[];l.d=0,o.then((e=>{a[n]=e,i(l)}),(e=>{a[t]=e,i(l)}));var a={};return a[e]=e=>e(l),a}}var s={};return s[e]=e=>{},s[n]=o,s})))(o);var a=()=>d.map((e=>{if(e[t])throw e[t];return e[n]})),r=new Promise((n=>{(l=()=>n(a)).r=0;var t=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(l.r++,e.push(l)));d.map((n=>n[e](t)))}));return l.r?r:a()}),(e=>(e?c(b[t]=e):r(p),i(s)))),s&&s.d<0&&(s.d=0)},l=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var t=Object.create(null);d.r(t);var i={};o=o||[null,l({}),l([]),l(l)];for(var a=2&n&&e;"object"==typeof a&&!~o.indexOf(a);a=l(a))Object.getOwnPropertyNames(a).forEach((n=>i[n]=()=>e[n]));return i.default=()=>e,d.d(t,i),t},d.d=(e,n)=>{for(var t in n)d.o(n,t)&&!d.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},d.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d(99)})();