(()=>{"use strict";var e,t,i,n,l,o,a={784:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{g:()=>d});var l=i(99),o=i(675),a=i(24),s=e([l,o]);function d(){$("#lssp-button").on("click",(()=>{!async function(){a.sw.open(),await(0,o._Y)(l.db).then((e=>e.sort(((e,t)=>e.get().name.localeCompare(t.get().name))))).then((e=>e.sort().forEach((e=>{$("#lssp-modal-dash-table-body").append(`<tr><td><img src="${e.getIconURL()}" alt="icon ${e.getTypeName()}"></td><td><a id="lssp-modal-dash-table-body-link">${e.name}</a></td><td>${e.getTypeName()}</td></tr>`);let t=document.querySelectorAll("#lssp-modal-dash-table-body-link");t[t.length-1].addEventListener("click",(()=>{console.log(e),a.s3.openWithData(e)}))}))))}()}))}[l,o]=s.then?(await s)():s,n()}catch(r){n(r)}}))},99:(e,t,i)=>{var n;i.a(e,(async(e,l)=>{try{i.d(t,{db:()=>p,e:()=>u});var o=i(675),a=i(840),s=i(423),d=i(784),r=i(232),c=e([o,d,r]);[o,d,r]=c.then?(await c)():c;const u=n||(n=i.t(a,2)),p=await(0,o.q4)();async function b(){(0,s.i8)("Starting..."),(0,s.EH)(),(0,s.s3)(),(0,d.g)(),(0,r.I)()}b(),l()}catch(g){l(g)}}),1)},675:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{Ks:()=>s,_Y:()=>d,q4:()=>a});var l=i(948),o=e([l]);function a(){return new Promise(((e,t)=>{const i=indexedDB.open(sessionStorage.getItem("dbName")||"LSS-Planner",3);i.onerror=()=>{t(i.error)},i.onsuccess=()=>{e(i.result)},i.onupgradeneeded=e=>{const t=e.target.result.createObjectStore("buildings",{keyPath:"id",autoIncrement:!0});t.createIndex("id","id",{unique:!0}),t.createIndex("name","name",{unique:!1}),t.createIndex("type","type",{unique:!1})}}))}function s(e,t){return new Promise(((i,n)=>{const o=e.transaction(["buildings"],"readonly").objectStore("buildings").get(t);o.onerror=()=>{n(o.error)},o.onsuccess=()=>{var e=new l.K;e.set(o.result),i(e)}}))}function d(e){return new Promise(((t,i)=>{const n=e.transaction(["buildings"],"readonly").objectStore("buildings").getAll();n.onerror=()=>{i(n.error)},n.onsuccess=()=>{let e=[];n.result.forEach((t=>{var i=new l.K;i.set(t),e.push(i)})),t(e)}}))}l=(o.then?(await o)():o)[0],n()}catch(r){n(r)}}))},948:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{K:()=>a});var l=i(99),o=e([l]);l=(o.then?(await o)():o)[0];class a{id;name;type;lat;lng;leitstelle;constructor(e=NaN,t="",i=NaN,n=NaN,l=NaN,o=NaN){this.id=e,this.name=t,this.type=i,this.lat=n,this.lng=l,this.leitstelle=o}set(e){this.id=e.id,this.name=e.name,this.type=e.type,this.lat=e.lat,this.lng=e.lng,this.leitstelle=e.leitstelle}get(){return{id:this.id,name:this.name,type:this.type,lat:this.lat,lng:this.lng,leitstelle:this.leitstelle}}getLeitstelle(){$.getJSON("../api/buildings",(e=>(e=e.filter((e=>e.id==this.leitstelle)),e[0]?.caption||"")))}getTypeName(){return this.type?l.e[this.type].caption:""}getIconURL(){return this.type?l.e[this.type].icon:""}}n()}catch(e){n(e)}}))},560:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{c:()=>d});var l=i(24),o=i(675),a=i(99),s=e([o,a]);[o,a]=s.then?(await s)():s;class d{lat;lng;building_ID;name;icon;marker;constructor(e){this.building_ID=e.get().id,this.lat=e.lat,this.lng=e.lng,this.name=e.get().name,this.marker=this.setMarker(),this.icon=this.setIcon(e.getIconURL())}getLatLng(){return[this.lat,this.lng]}setMarker(){return this.marker=L.marker([this.lat,this.lng],{title:this.name,opacity:.6}).on("click",(async()=>{l.s3.openWithData(await(0,o.Ks)(a.db,this.building_ID))})).addTo(map).bindTooltip(this.name),this.marker}setIcon(e){return this.icon=L.icon({iconUrl:e,iconSize:[32,37],iconAnchor:[16,37]}),this.marker.setIcon(this.icon),this.icon}}n()}catch(e){n(e)}}))},423:(e,t,i)=>{function n(e){console.log(`[${sessionStorage.getItem("scriptName")||"LSS-Planner"}]: `+e)}function l(){let e=document.createElement("li");e.setAttribute("class","divider"),e.setAttribute("role","presentation"),document.getElementById("logout_button")?.parentElement?.parentElement?.appendChild(e);let t=document.createElement("a");t.setAttribute("href","javascript: void(0)"),t.setAttribute("id","lssp-button"),t.append("Lss-Planner");let i=document.createElement("li");i.appendChild(t),document.getElementById("logout_button")?.parentElement?.parentElement?.appendChild(i)}function o(){$.getJSON("../api/buildings",(function(e){(e=e.filter((e=>7==e.building_type))).forEach((e=>{$("#lssp-building-modal-building-leitstelle").append(`<option value="${e.id}">${e.caption}</option>`)}))}))}i.d(t,{EH:()=>o,i8:()=>n,s3:()=>l})},232:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{I:()=>d});var l=i(99),o=i(675),a=i(560),s=e([l,o,a]);async function d(){var e=[];return(await(0,o._Y)(l.db)).forEach((t=>e.push(new a.c(t)))),e}[l,o,a]=s.then?(await s)():s,n()}catch(r){n(r)}}))},24:(e,t,i)=>{i.d(t,{s3:()=>o,sw:()=>l});class n{name;constructor(e,t){this.name=e;const i=document.createElement("div");i.className="modal fade",i.id=e,i.setAttribute("tabindex","-1"),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby","lssp-modal-label"),i.setAttribute("aria-hidden","true"),i.style.zIndex="5000",i.innerHTML=t,document.body.appendChild(i)}close(){$("#"+this.name).modal("hide")}open(){$("#"+this.name).modal("show")}}const l=new n("lssp-modal",'<div class="modal-dialog modal-lg" role="document" style="width:95%;margin:40px auto"><div class="modal-content" action=""><div class="modal-header"><h1 class="modal-title" id="lssp-modal-label">LSS-Planner</h1><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div id="lssp-modal-body" class="modal-body" style="height:calc(100vh - 350px);overflow-y:auto"><div><ul class="nav nav-tabs" role="tablist" style="margin-bottom:10px"><li role="presentation" class="active"><a href="#lssp-modal-dash-panel" aria-controls="lssp-modal-dash-panel" role="tab" data-toggle="tab">Übersicht</a></li><li role="presentation"><a href="#lssp-modal-backup-panel" aria-controls="lssp-modal-backup-panel" role="tab" data-toggle="tab">BackUp</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane active" id="lssp-modal-dash-panel"><table id="lssp-modal-dash-table" class="table table-striped tablesorter tablesorter-default" role="grid"><thead><tr class="tablesorter-headerRow" role="row"><th></th><th>Name</th><th>Typ</th></tr></thead><tbody id="lssp-modal-dash-table-body" aria-live="polite" aria-relevant="all"></tbody></table></div><div role="tabpanel" class="tab-pane" id="lssp-modal-backup-panel"><div><h2>JSON-Datei</h2><input type="file" id="lssp-modal-selectFiles" value="Import"><br><button id="lssp-modal-import" class="btn btn-default">Importieren</button><button id="lssp-modal-export" class="btn btn-success">Herunterladen</button></div><div><h2>Notizen</h2><button id="lssp-modal-export-notes" class="btn btn-success">in Notizen Exportieren</button><button id="lssp-modal-import-notes" class="btn btn-success">aus Notizen Importieren</button></div><div><h2>Zu Importierende Daten</h2><table class="table table-striped tablesorter tablesorter-default"><thead><tr class="tablesorter-headerRow" role="row"><th></th><th>Name</th><th>Typ</th></tr></thead><tbody id="lssp-modal-body-output"></tbody></table><button id="lssp-modal-import-save" class="btn btn-success" type="button">Speichern</button><button id="lssp-modal-delete" class="btn btn-danger">Alles Löschen</button></div></div></div></div></div></div></div>'),o=new class extends n{openWithData(e){this.open(),document.getElementById("lssp-building-modal-form")?.setAttribute("data",JSON.stringify(e));let t=document.getElementById("lssp-building-modal-body-title");t&&(t.innerHTML=`${e.name}`);let i=document.getElementById("lssp-building-modal-body-type");i&&(i.innerHTML=`${e.getTypeName()}`);let n=document.getElementById("lssp-building-modal-body-lat");n&&(n.innerHTML=`Latitude: ${e.lat}`);let l=document.getElementById("lssp-building-modal-body-lng");l&&(l.innerHTML=`Longitude: ${e.lng}`);let o=document.getElementById("lssp-building-modal-body-leitstelle");$.getJSON("../api/buildings",(function(t){t=t.filter((t=>t.id==e.leitstelle)),o&&(o.innerHTML=`Leitstelle: ${t[0]?.caption||""}`)}))}}("lssp-building-modal",'<div class="modal-dialog modal-lg" role="document" style="width:95%;margin:40px auto"><div class="modal-content" action=""><div class="modal-header"><h1 class="modal-title" id="lssp-building-modal-label">LSS-Planner</h1><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><form id="lssp-building-modal-form"><div id="lssp-building-modal-body" class="modal-body" style="height:calc(100vh - 350px);overflow-y:auto"><div><h1 id="lssp-building-modal-body-title"></h1><p id="lssp-building-modal-body-type"></p></div><p id="lssp-building-modal-body-leitstelle">Leitstelle:</p><p id="lssp-building-modal-body-lat">Latitude:</p><p id="lssp-building-modal-body-lng">Longitude:</p><button type="submit" id="lssp-building-modal-form-build" class="btn btn-success">Bauen</button><button type="submit" id="lssp-building-modal-form-submit" class="btn btn-default">Bearbeiten</button><button type="submit" id="lssp-building-modal-form-delete" data-confirm="Wirklich Löschen?" data-method="delete" class="btn btn-danger">Löschen</button></div></form></div></div>');new n("lssp-building-edit-modal",'<div class="modal-dialog modal-lg" role="document" style="width:95%;margin:40px auto"><div class="modal-content" action=""><div class="modal-header"><h1 class="modal-title" id="lssp-building-edit-modal-label">LSS-Planner</h1><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><form id="lssp-building-edit-modal-form"><div id="lssp-building-edit-modal-body" class="modal-body" style="height:calc(100vh - 350px);overflow-y:auto"><div class="col-md-12 col-xs-12"><div id="building_name_step"><div class="input-group string required building_name"><div class="input-group-addon"><label class="string required" for="building_name"><abbr title="required">*</abbr>Name</label></div><input class="string required form-control" id="lssp-building-modal-building-name" maxlength="40" name="building[name]" size="50" type="text" control-id="ControlID-14"></div></div><div class="input-group select required building_building_type"><div class="input-group-addon"><label class="integer required select required" for="lssp-building-modal-building-type"><abbr title="required">*</abbr>Gebäudetyp</label></div><select class="select required form-control" id="lssp-building-modal-building-type" name="building[building_type]"><option value=""></option><option value="7">Leitstelle</option><option value="0">Feuerwache</option><option value="18">Feuerwache (Kleinwache)</option><option value="1">Feuerwehrschule</option><option value="2">Rettungswache</option><option value="20">Rettungswache (Kleinwache)</option><option value="3">Rettungsschule</option><option value="4">Krankenhaus</option><option value="5">Rettungshubschrauber-Station</option><option value="12">Schnelleinsatzgruppe (SEG)</option><option value="6">Polizeiwache</option><option value="19">Polizeiwache (Kleinwache)</option><option value="11">Bereitschaftspolizei</option><option value="17">Polizei-Sondereinheiten</option><option value="24">Reiterstaffel</option><option value="13">Polizeihubschrauberstation</option><option value="8">Polizeischule</option><option value="9">THW</option><option value="10">THW Bundesschule</option><option value="14">Bereitstellungsraum</option><option value="15">Wasserrettung</option><option value="21">Rettungshundestaffel</option></select></div><div class="input-group select required building_building_type"><div class="input-group-addon"><label class="integer optional select required" for="lssp-building-modal-building-leitstelle">Zugeordnete Leitstelle</label></div><select class="select required form-control" id="lssp-building-modal-building-leitstelle" name="building[building_type]"><option value=""></option></select></div></div><button type="submit" id="lssp-building-edit-modal-form-submit" class="btn btn-default">Speichern</button></div></form></div></div>')},840:e=>{e.exports=JSON.parse('{"0":{"icon":"/images/building_fire_other.png","caption":"Feuerwache"},"1":{"icon":"/images/building_fireschool_other.png","caption":"Feuerwehrschule"},"2":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungswache"},"3":{"icon":"/images/building_rettungsschule_other.png","caption":"Rettungsschule"},"4":{"icon":"/images/building_hospital_other.png","caption":"Krankenhaus"},"5":{"icon":"/images/building_helipad_other.png","caption":"Rettungshubschrauber-Station"},"6":{"icon":"/images/building_polizeiwache_other.png","caption":"Polizeiwache"},"7":{"icon":"/images/building_leitstelle_other.png","caption":"Leitstelle"},"8":{"icon":"/images/building_polizeischule_other.png","caption":"Polizeischule"},"9":{"icon":"/images/building_thw_other.png","caption":"THW"},"10":{"icon":"/images/building_thw_school_other.png","caption":"THW Bundesschule"},"11":{"icon":"/images/building_bereitschaftspolizei_other.png","caption":"Bereitschaftspolizei"},"12":{"icon":"/images/building_seg_other.png","caption":"Schnelleinsatzgruppe (SEG)"},"13":{"icon":"/images/building_helipad_polizei_other.png","caption":"Polizeihubschrauberstation"},"14":{"icon":"/images/building_bereitstellungsraum_other.png","caption":"Bereitstellungsraum"},"15":{"icon":"/images/building_wasserwacht_other.png","caption":"Wasserrettung"},"16":{"icon":"/images/building_polizeiwache_other.png","caption":"Verbandszellen"},"17":{"icon":"/images/building_polizeisondereinheiten_other.png","caption":"Polizei-Sondereinheiten"},"18":{"icon":"/images/building_fire_other.png","caption":"Feuerwache (Kleinwache)"},"19":{"icon":"/images/building_polizeiwache_other.png","caption":"Polizeiwache (Kleinwache)"},"20":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungswache (Kleinwache)"},"21":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungshundestaffel"},"22":{"icon":"/images/building_complex_other.png","caption":"Großer Komplex"},"23":{"icon":"/images/building_complex_other.png","caption":"Kleiner Komplex"},"24":{"icon":"/images/building_police_horse_other.png","caption":"Reiterstaffel"}}')}},s={};function d(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return a[e](i,i.exports,d),i.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},d.a=(l,o,a)=>{var s;a&&((s=[]).d=-1);var d,r,c,u=new Set,p=l.exports,b=new Promise(((e,t)=>{c=t,r=e}));b[t]=p,b[e]=e=>(s&&e(s),u.forEach(e),b.catch((e=>{}))),l.exports=b,o((l=>{var o;d=(l=>l.map((l=>{if(null!==l&&"object"==typeof l){if(l[e])return l;if(l.then){var o=[];o.d=0,l.then((e=>{a[t]=e,n(o)}),(e=>{a[i]=e,n(o)}));var a={};return a[e]=e=>e(o),a}}var s={};return s[e]=e=>{},s[t]=l,s})))(l);var a=()=>d.map((e=>{if(e[i])throw e[i];return e[t]})),r=new Promise((t=>{(o=()=>t(a)).r=0;var i=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(o.r++,e.push(o)));d.map((t=>t[e](i)))}));return o.r?r:a()}),(e=>(e?c(b[i]=e):r(p),n(s)))),s&&s.d<0&&(s.d=0)},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var i=Object.create(null);d.r(i);var n={};l=l||[null,o({}),o([]),o(o)];for(var a=2&t&&e;"object"==typeof a&&!~l.indexOf(a);a=o(a))Object.getOwnPropertyNames(a).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,d.d(i,n),i},d.d=(e,t)=>{for(var i in t)d.o(t,i)&&!d.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d(99)})();