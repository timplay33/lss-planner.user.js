(()=>{"use strict";var e,t,i,n,l,s,o,a={197:(e,t,i)=>{var n;i.a(e,async(e,l)=>{try{i.d(t,{db:()=>g,z:()=>p});var s=i(896),o=i(693),a=i(568),r=i(823),d=i(204),u=i(224),c=e([s,a,r,d,u]);[s,a,r,d,u]=c.then?(await c)():c;const p=n||(n=i.t(o,2)),g=await(0,s.qI)();async function m(){(0,a.OG)("Starting..."),(0,a.bq)(),(0,a.X1)(),(0,r.M)(),(0,d.Y)(),(0,u.m)()}m(),l()}catch(b){l(b)}},1)},204:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{Y:()=>r});var l=i(197),s=i(896),o=i(553),a=e([l,s,o]);async function r(){var e=[];return(await(0,s.fI)(l.db)).forEach(t=>{let i=new o.mq(t,t.iconURL);i.addToMap(),e.push(i)}),e}[l,s,o]=a.then?(await a)():a,n()}catch(d){n(d)}})},224:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{m:()=>a});var l=i(568),s=i(983),o=e([l,s]);function a(){L.Control.MyControl=L.Control.extend({onAdd:function(){var e=L.DomUtil.create("div","leaflet-bar my-control");return e.innerHTML='<button id="plan-new-building" class="btn btn-xs ajax btn-default">Neues Gebäude planen</button><button id="save-plan-new-building" class="btn btn-xs ajax btn-default">Speichern</button>',e}}),L.control.myControl=function(e){return new L.Control.MyControl(e)},L.control.myControl({position:"bottomleft"}).addTo(map),document.getElementById("plan-new-building")&&document.getElementById("plan-new-building")?.addEventListener("click",r,!1),document.getElementById("save-plan-new-building")&&document.getElementById("save-plan-new-building")?.setAttribute("disabled","true")}function r(){let e=document.getElementById("plan-new-building"),t=document.getElementById("save-plan-new-building");e?.setAttribute("disabled","true"),t?.removeAttribute("disabled"),document.getElementById("save-plan-new-building")&&document.getElementById("save-plan-new-building")?.addEventListener("click",function(){$("#lssp-building-edit-modal").modal("show");let e=new s.P;e.type=NaN;let t=n.getLatLng();e.setLatLng(t),sessionStorage.setItem("active_building",JSON.stringify(e.getAllProperties())),$("#lssp-building-modal-building-name").val(e.name),$("#lssp-building-modal-building-type").val(e.type),$("#lssp-building-modal-building-leitstelle").val(e.leitstelle)},!1),(0,l.OG)("Adding building...");let i=map.getCenter(),n=L.marker([i.lat,i.lng],{draggable:!0,zIndexOffset:1e5}).addTo(map)}[l,s]=o.then?(await o)():o,n()}catch(d){n(d)}})},313:(e,t,i)=>{i.d(t,{js:()=>s,C8:()=>o,Wz:()=>l});class n{name;constructor(e,t){this.name=e;const i=document.createElement("div");i.className="modal fade",i.id=e,i.setAttribute("tabindex","-1"),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby","lssp-modal-label"),i.setAttribute("aria-hidden","true"),i.style.zIndex="5000",i.innerHTML=t,document.body.appendChild(i),"lssp-modal"==i.id&&("true"==sessionStorage.getItem("isRdHidden")&&$("#lssp-modal-settings-hide-rd").html("zeigen"),"true"==sessionStorage.getItem("isFeuHidden")&&$("#lssp-modal-settings-hide-feu").html("zeigen"),"true"==sessionStorage.getItem("isPolHidden")&&$("#lssp-modal-settings-hide-pol").html("zeigen"),"true"==sessionStorage.getItem("isThwHidden")&&$("#lssp-modal-settings-hide-thw").html("zeigen"),"true"==sessionStorage.getItem("isSchoolHidden")&&$("#lssp-modal-settings-hide-school").html("zeigen"),"true"==sessionStorage.getItem("isOtherHidden")&&$("#lssp-modal-settings-hide-other").html("zeigen"))}close(){$("#"+this.name).modal("hide")}open(){$("#"+this.name).modal("show")}}const l=new n("lssp-modal",'<div class="modal-dialog modal-lg" role="document" style="width:95%;margin:40px auto"><div class="modal-content" action=""><div class="modal-header"><h1 class="modal-title" id="lssp-modal-label">LSS-Planner</h1><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div id="lssp-modal-body" class="modal-body" style="height:calc(100vh - 350px);overflow-y:auto"><div><ul class="nav nav-tabs" role="tablist" style="margin-bottom:10px"><li role="presentation" class="active"><a href="#lssp-modal-dash-panel" aria-controls="lssp-modal-dash-panel" role="tab" data-toggle="tab">Übersicht</a></li><li role="presentation"><a href="#lssp-modal-backup-panel" aria-controls="lssp-modal-backup-panel" role="tab" data-toggle="tab">BackUp</a></li><li role="presentation"><a href="#lssp-modal-settings-panel" aria-controls="lssp-modal-settings-panel" role="tab" data-toggle="tab">Einstellungen</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane active" id="lssp-modal-dash-panel"><table id="lssp-modal-dash-table" class="table table-striped tablesorter tablesorter-default" role="grid"><thead><tr class="tablesorter-headerRow" role="row"><th></th><th>Name</th><th>Typ</th></tr></thead><tbody id="lssp-modal-dash-table-body" aria-live="polite" aria-relevant="all"></tbody></table></div><div role="tabpanel" class="tab-pane" id="lssp-modal-backup-panel"><div><h2>JSON-Datei</h2><input type="file" id="lssp-modal-selectFiles" value="Import"><br><button id="lssp-modal-import" class="btn btn-default">Importieren</button><button id="lssp-modal-export" class="btn btn-success">Herunterladen</button></div><div><h2>Notizen</h2><button id="lssp-modal-export-notes" class="btn btn-success">in Notizen Exportieren</button><button id="lssp-modal-import-notes" class="btn btn-success">aus Notizen Importieren</button></div><div><h2>Zu Importierende Daten</h2><table class="table table-striped tablesorter tablesorter-default"><thead><tr class="tablesorter-headerRow" role="row"><th></th><th>Name</th><th>Typ</th></tr></thead><tbody id="lssp-modal-body-output"></tbody></table><button id="lssp-modal-import-save" class="btn btn-success row" type="button">Speichern</button><button id="lssp-modal-delete" class="btn btn-danger">Alles Löschen</button></div></div><div role="tabpanel" class="tab-pane active" id="lssp-modal-settings-panel"><h2>Pläne verstecken</h2><h4>Alle</h4><button type="button" class="btn btn-default" id="lssp-modal-settings-hide-all">verstecken / zeigen</button><h4>Feuerwehr</h4><button type="button" class="btn btn-default" id="lssp-modal-settings-hide-feu">verstecken</button><h4>Polizei</h4><button type="button" class="btn btn-default" id="lssp-modal-settings-hide-pol">verstecken</button><h4>Rettungsdienst</h4><button type="button" class="btn btn-default" id="lssp-modal-settings-hide-rd">verstecken</button><h4>THW</h4><button type="button" class="btn btn-default" id="lssp-modal-settings-hide-thw">verstecken</button><h4>Schulen</h4><button type="button" class="btn btn-default" id="lssp-modal-settings-hide-school">verstecken</button><h4>Andere</h4><button type="button" class="btn btn-default" id="lssp-modal-settings-hide-other">verstecken</button></div></div></div></div></div></div>'),s=new class extends n{openWithData(e){this.open(),sessionStorage.setItem("active_building",JSON.stringify(e.getAllProperties()));let t=document.getElementById("lssp-building-modal-body-title");t&&(t.innerHTML=`${e.name}`);let i=document.getElementById("lssp-building-modal-body-type");i&&(i.innerHTML=`${e.typeName}`);let n=document.getElementById("lssp-building-modal-body-lat");n&&(n.innerHTML=`Latitude: ${e.lat}`);let l=document.getElementById("lssp-building-modal-body-lng");l&&(l.innerHTML=`Longitude: ${e.lng}`);let s=document.getElementById("lssp-building-modal-body-leitstelle");$.getJSON("../api/buildings",function(t){t=t.filter(t=>t.id==e.leitstelle),s&&(s.innerHTML=`Leitstelle: ${t[0]?.caption||""}`)})}}("lssp-building-modal",'<div class="modal-dialog modal-lg" role="document" style="width:95%;margin:40px auto"><div class="modal-content" action=""><div class="modal-header"><h1 class="modal-title" id="lssp-building-modal-label">LSS-Planner</h1><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><form id="lssp-building-modal-form"><div id="lssp-building-modal-body" class="modal-body" style="height:calc(100vh - 350px);overflow-y:auto"><div><h1 id="lssp-building-modal-body-title"></h1><p id="lssp-building-modal-body-type"></p></div><p id="lssp-building-modal-body-leitstelle">Leitstelle:</p><p id="lssp-building-modal-body-lat">Latitude:</p><p id="lssp-building-modal-body-lng">Longitude:</p><button type="submit" id="lssp-building-modal-form-build" class="btn btn-success">Bauen</button><button type="submit" id="lssp-building-modal-form-submit" class="btn btn-default">Bearbeiten</button><button type="submit" id="lssp-building-modal-form-delete" data-confirm="Wirklich Löschen?" data-method="delete" class="btn btn-danger">Löschen</button></div></form></div></div>'),o=new class extends n{openWithData(e){this.open(),sessionStorage.setItem("active_building",JSON.stringify(e.getAllProperties()));let t=document.getElementById("lssp-building-modal-building-name");t?.setAttribute("value",e.name||""),$("#lssp-building-modal-building-type").val(e.type||NaN),$("#lssp-building-modal-building-leitstelle").val(e.leitstelle||NaN)}}("lssp-building-edit-modal",'<div class="modal-dialog modal-lg" role="document" style="width:95%;margin:40px auto"><div class="modal-content" action=""><div class="modal-header"><h1 class="modal-title" id="lssp-building-edit-modal-label">LSS-Planner</h1><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><form id="lssp-building-edit-modal-form"><div id="lssp-building-edit-modal-body" class="modal-body" style="height:calc(100vh - 350px);overflow-y:auto"><div class="col-md-12 col-xs-12"><div id="building_name_step"><div class="input-group string required building_name"><div class="input-group-addon"><label class="string required" for="building_name"><abbr title="required">*</abbr>Name</label></div><input class="string required form-control" id="lssp-building-modal-building-name" maxlength="40" name="building[name]" size="50" type="text" control-id="ControlID-14"></div></div><div class="input-group select required building_building_type"><div class="input-group-addon"><label class="integer required select required" for="lssp-building-modal-building-type"><abbr title="required">*</abbr>Gebäudetyp</label></div><select class="select required form-control" id="lssp-building-modal-building-type" name="building[building_type]"><option value=""></option><option value="7">Leitstelle</option><option value="0">Feuerwache</option><option value="18">Feuerwache (Kleinwache)</option><option value="1">Feuerwehrschule</option><option value="2">Rettungswache</option><option value="20">Rettungswache (Kleinwache)</option><option value="3">Rettungsschule</option><option value="4">Krankenhaus</option><option value="5">Rettungshubschrauber-Station</option><option value="12">Schnelleinsatzgruppe (SEG)</option><option value="6">Polizeiwache</option><option value="19">Polizeiwache (Kleinwache)</option><option value="11">Bereitschaftspolizei</option><option value="17">Polizei-Sondereinheiten</option><option value="24">Reiterstaffel</option><option value="13">Polizeihubschrauberstation</option><option value="8">Polizeischule</option><option value="9">THW</option><option value="10">THW Bundesschule</option><option value="14">Bereitstellungsraum</option><option value="15">Wasserrettung</option><option value="21">Rettungshundestaffel</option><option value="25">Bergrettungswache</option><option value="26">Seenotrettungswache</option><option value="27">Schule für Seefahrt und Seenotrettung</option><option value="28">Hubschrauberstation (Seenotrettung)</option></select></div><div class="input-group select required building_building_type"><div class="input-group-addon"><label class="integer optional select required" for="lssp-building-modal-building-leitstelle">Zugeordnete Leitstelle</label></div><select class="select required form-control" id="lssp-building-modal-building-leitstelle" name="building[building_type]"><option value=""></option></select></div></div><button type="submit" id="lssp-building-edit-modal-form-submit" class="btn btn-default">Speichern</button></div></form></div></div>')},553:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{AW:()=>u,Qu:()=>d,WK:()=>c,_P:()=>p,mq:()=>m,n0:()=>r,ry:()=>g});var l=i(313),s=i(896),o=i(197),a=e([s,o]);[s,o]=a.then?(await a)():a;var r=L.layerGroup().addTo(map),d=L.layerGroup().addTo(map),u=L.layerGroup().addTo(map),c=L.layerGroup().addTo(map),p=L.layerGroup().addTo(map),g=L.layerGroup().addTo(map);class m{lat;lng;name;buildingId;iconUrl;marker;buildingType;constructor(e,t){this.lat=e.lat,this.lng=e.lng,this.name=e.name,this.iconUrl=t||"/images/building_fire_other.png",this.marker=this.createMarker(),this.buildingId=e.id,this.buildingType=e.type}createMarker(){const e=L.icon({iconUrl:this.iconUrl,iconSize:[32,37],iconAnchor:[16,37]});return L.marker([this.lat,this.lng],{icon:e,opacity:.6}).bindTooltip(this.name).on("click",async()=>{l.js.openWithData(await(0,s.h0)(o.db,this.buildingId))})}get LatLng(){return[this.lat,this.lng]}addToMap(){switch(this.buildingType){case 0:case 18:r.addLayer(this.marker);break;case 2:case 20:u.addLayer(this.marker);break;case 6:case 19:d.addLayer(this.marker);break;case 3:case 1:case 8:case 10:c.addLayer(this.marker);break;case 9:g.addLayer(this.marker);break;default:p.addLayer(this.marker)}"true"==sessionStorage.getItem("isRdHidden")&&map.removeLayer(u),"true"==sessionStorage.getItem("isFeuHidden")&&map.removeLayer(r),"true"==sessionStorage.getItem("isPolHidden")&&map.removeLayer(d),"true"==sessionStorage.getItem("isThwHidden")&&map.removeLayer(g),"true"==sessionStorage.getItem("isSchoolHidden")&&map.removeLayer(c),"true"==sessionStorage.getItem("isOtherHidden")&&map.removeLayer(p)}removeFromMap(){map.removeLayer(this.marker)}}n()}catch(e){n(e)}})},568:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{OG:()=>a,X1:()=>r,ZB:()=>u,bq:()=>d,ic:()=>p,mS:()=>c});var l=i(197),s=i(896),o=e([l,s]);function a(...e){console.log(`[${sessionStorage.getItem("scriptName")||"LSS-Planner"}]: `,...e)}function r(){let e=document.createElement("li");e.setAttribute("class","divider"),e.setAttribute("role","presentation"),document.getElementById("logout_button")?.parentElement?.parentElement?.appendChild(e);let t=document.createElement("a");t.setAttribute("href","javascript: void(0)"),t.setAttribute("id","lssp-button"),t.append("Lss-Planner");let i=document.createElement("li");i.appendChild(t),document.getElementById("logout_button")?.parentElement?.parentElement?.appendChild(i)}function d(){$.getJSON("../api/buildings",function(e){(e=e.filter(e=>7==e.building_type)).forEach(e=>{$("#lssp-building-modal-building-leitstelle").append(`<option value="${e.id}">${e.caption}</option>`)})})}async function u(e){$("#lssp-building-modal").modal("hide"),document.getElementById("build_new_building")?.click(),await new Promise(e=>setTimeout(e,500)),$("#building_building_type").val(e.type).trigger("change"),$("#building_name").val(e.name).trigger("keydown"),building_new_marker.setLatLng(L.latLng(e.lat,e.lng)),building_new_dragend(),$("#building_leitstelle_building_id").val(e.leitstelle).trigger("change"),$("#new_building").on("submit",function(){a("Build: "+e.name),(0,s.T$)(l.db,e.id)})}function c(e,t){var i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");n.setAttribute("href",i),n.setAttribute("download",t+".json"),document.body.appendChild(n),n.click(),n.remove()}function p(e){let t=new Date(e);return[t.toLocaleDateString().split(".").map(e=>e.length<2?0+e:e).join("-"),[t.getHours(),t.getMinutes()].map(e=>e.toString().length<2?0+e.toString():e.toString()).join("-")].join("-")}[l,s]=o.then?(await o)():o,n()}catch(g){n(g)}})},693:e=>{e.exports=JSON.parse('{"0":{"icon":"/images/building_fire_other.png","caption":"Feuerwache"},"1":{"icon":"/images/building_fireschool_other.png","caption":"Feuerwehrschule"},"2":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungswache"},"3":{"icon":"/images/building_rettungsschule_other.png","caption":"Rettungsschule"},"4":{"icon":"/images/building_hospital_other.png","caption":"Krankenhaus"},"5":{"icon":"/images/building_helipad_other.png","caption":"Rettungshubschrauber-Station"},"6":{"icon":"/images/building_polizeiwache_other.png","caption":"Polizeiwache"},"7":{"icon":"/images/building_leitstelle_other.png","caption":"Leitstelle"},"8":{"icon":"/images/building_polizeischule_other.png","caption":"Polizeischule"},"9":{"icon":"/images/building_thw_other.png","caption":"THW"},"10":{"icon":"/images/building_thw_school_other.png","caption":"THW Bundesschule"},"11":{"icon":"/images/building_bereitschaftspolizei_other.png","caption":"Bereitschaftspolizei"},"12":{"icon":"/images/building_seg_other.png","caption":"Schnelleinsatzgruppe (SEG)"},"13":{"icon":"/images/building_helipad_polizei_other.png","caption":"Polizeihubschrauberstation"},"14":{"icon":"/images/building_bereitstellungsraum_other.png","caption":"Bereitstellungsraum"},"15":{"icon":"/images/building_wasserwacht_other.png","caption":"Wasserrettung"},"16":{"icon":"/images/building_polizeiwache_other.png","caption":"Verbandszellen"},"17":{"icon":"/images/building_polizeisondereinheiten_other.png","caption":"Polizei-Sondereinheiten"},"18":{"icon":"/images/building_fire_other.png","caption":"Feuerwache (Kleinwache)"},"19":{"icon":"/images/building_polizeiwache_other.png","caption":"Polizeiwache (Kleinwache)"},"20":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungswache (Kleinwache)"},"21":{"icon":"/images/building_rescue_station_other.png","caption":"Rettungshundestaffel"},"22":{"icon":"/images/building_complex_other.png","caption":"Großer Komplex"},"23":{"icon":"/images/building_complex_other.png","caption":"Kleiner Komplex"},"24":{"icon":"/images/building_police_horse_other.png","caption":"Reiterstaffel"},"25":{"icon":"/images/building_mountain_rescue_other.png","caption":"Bergrettungswache"},"26":{"icon":"/images/building_coastal_rescue_other.png","caption":"Seenotrettungswache"},"27":{"icon":"/images/building_coastal_rescue_school_other.png","caption":"Schule für Seefahrt und Seenotrettung"},"28":{"icon":"/images/building_water_rescue_heliport_other.png","caption":"Hubschrauberstation (Seenotrettung)"}}')},753:(e,t,i)=>{i.d(t,{C:()=>s,j:()=>n});const n={start:"LSS-Planner Backup START: Do not modify",end:"LSS-Planner Backup END"};var l=function(e){var t=document.createElement("div");return t.innerHTML=e,t};async function s(){let e=await $.get("https://www.leitstellenspiel.de/note"),t=l(e);return t.querySelector("textarea")?.innerHTML||""}},823:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{M:()=>p});var l=i(197),s=i(896),o=i(568),a=i(983),r=i(553),d=i(753),u=i(313),c=e([l,s,o,a,r]);function p(){$("#lssp-button").on("click",()=>{!async function(){u.Wz.open(),await(0,s.fI)(l.db).then(e=>e.sort((e,t)=>e.name.localeCompare(t.name))).then(e=>e.sort().forEach(e=>{$("#lssp-modal-dash-table-body").append(`<tr><td><img src="${e.iconURL}" alt="icon ${e.typeName}"></td><td><a id="lssp-modal-dash-table-body-link">${e.name}</a></td><td>${e.typeName}</td></tr>`);let t=document.querySelectorAll("#lssp-modal-dash-table-body-link");t[t.length-1].addEventListener("click",()=>{u.js.openWithData(e)})}))}()}),$("#lssp-building-edit-modal-form").submit(function(e){e.preventDefault();let t=new a.P;t.set(JSON.parse(sessionStorage.getItem("active_building")||""));const i=$("#lssp-building-edit-modal-form input:text").val(),n=1*$("#lssp-building-modal-building-type").val(),r=1*$("#lssp-building-modal-building-leitstelle").val();(0,o.OG)(`${i} - ${n}`),t.name=i,t.type=1*n,t.leitstelle=1*r,0==t.id?(0,s.ys)(l.db,t.getWithoutID()):(0,s.ys)(l.db,t.getAllProperties()),location.reload()}),$("#lssp-building-modal-form").submit(function(e){e.preventDefault();let t=new a.P;t.set(JSON.parse(sessionStorage.getItem("active_building")||"")),e.originalEvent.submitter==document.getElementById("lssp-building-modal-form-delete")?((0,s.T$)(l.db,t.id),location.reload()):e.originalEvent.submitter==document.getElementById("lssp-building-modal-form-build")?((0,o.ZB)(t),(0,o.OG)("Building is being built",t.getAllProperties())):u.C8.openWithData(t)}),$("#lssp-modal-export").on("click",async function(){let e=(await(0,s.fI)(l.db)).map(e=>e.getAllProperties());(0,o.mS)(e,`LSS-Planner-${(0,o.ic)(new Date)}`)}),$("#lssp-modal-delete").on("click",async function(){confirm("Wirklich alles Löschen?")?await(0,s.fI)(l.db).then(e=>{e.forEach(e=>(0,s.T$)(l.db,e.id)),(0,o.OG)("Alles Gelöscht"),location.reload()}):(0,o.OG)("Löschen Abgebrochen")}),$("#lssp-modal-import").on("click",function(){var e=document.getElementById("lssp-modal-selectFiles").files,t=new FileReader;t.onload=function(e){var t=JSON.parse(e.target?.result);let i=[];t.forEach(e=>{let t=new a.P;t.set(e),i.push(t)}),console.log(i),i.forEach(e=>{$("#lssp-modal-body-output").append(`\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td ><img src="${e.iconURL}" alt="icon ${e.typeName}"></td>\n\t\t\t\t\t\t<td >${e.name}</td>\n\t\t\t\t\t\t<td >${e.typeName}</td>\n\t\t\t\t\t</tr>`)}),$("#lssp-modal-import-save").on("click",function(){i.forEach(e=>{(0,s.ys)(l.db,e.getAllProperties()),location.reload()})})},t.readAsText(e.item(0))}),$("#lssp-modal-export-notes").on("click",async function(){(0,o.OG)("Saving to Notes...");let e=(await(0,s.fI)(l.db)).map(e=>e.getAllProperties());console.log(e);let t=`<h2>This feature is currently disabled! But you may copy the text below into your notes:</h2> \n${d.j.start}\n ${JSON.stringify(e)}\n ${d.j.end}`;const i=document.createElement("div");i.innerHTML=t,i.style.cssText="background-color: black;",this.parentElement?.append(i)}),$("#lssp-modal-import-notes").on("click",async function(){const e=await(0,d.C)();let t=e.search(d.j.start),i=e.search(d.j.end),n=e.substring(t+d.j.start.length+1,i);var o=JSON.parse(n);let r=[];o.forEach(e=>{let t=new a.P;t.set(e),r.push(t)}),console.log(r),r.forEach(e=>{$("#lssp-modal-body-output").append(`\n\t\t\t\t<tr>\n\t\t\t\t<td ><img src="${e.iconURL}" alt="icon ${e.typeName}"></td>\n\t\t\t\t<td >${e.name}</td>\n\t\t\t\t<td >${e.typeName}</td>\n\t\t\t</tr>`)}),$("#lssp-modal-import-save").on("click",function(){r.forEach(e=>{(0,s.ys)(l.db,e.getAllProperties()),location.reload()})})}),$("#lssp-modal-settings-hide-rd").on("click",function(){"true"==sessionStorage.getItem("isRdHidden")?(map.addLayer(r.AW),sessionStorage.setItem("isRdHidden","false"),this.innerHTML="verstecken"):(sessionStorage.setItem("isRdHidden","true"),map.removeLayer(r.AW),this.innerHTML="zeigen")}),$("#lssp-modal-settings-hide-feu").on("click",function(){"true"==sessionStorage.getItem("isFeuHidden")?(map.addLayer(r.n0),sessionStorage.setItem("isFeuHidden","false"),this.innerHTML="verstecken"):(sessionStorage.setItem("isFeuHidden","true"),map.removeLayer(r.n0),this.innerHTML="zeigen")}),$("#lssp-modal-settings-hide-pol").on("click",function(){"true"==sessionStorage.getItem("isPolHidden")?(map.addLayer(r.Qu),sessionStorage.setItem("isPolHidden","false"),this.innerHTML="verstecken"):(sessionStorage.setItem("isPolHidden","true"),map.removeLayer(r.Qu),this.innerHTML="zeigen")}),$("#lssp-modal-settings-hide-thw").on("click",function(){"true"==sessionStorage.getItem("isThwHidden")?(map.addLayer(r.ry),sessionStorage.setItem("isThwHidden","false"),this.innerHTML="verstecken"):(sessionStorage.setItem("isThwHidden","true"),map.removeLayer(r.ry),this.innerHTML="zeigen")}),$("#lssp-modal-settings-hide-school").on("click",function(){"true"==sessionStorage.getItem("isSchoolHidden")?(map.addLayer(r.WK),sessionStorage.setItem("isSchoolHidden","false"),this.innerHTML="verstecken"):(sessionStorage.setItem("isSchoolHidden","true"),map.removeLayer(r.WK),this.innerHTML="zeigen")}),$("#lssp-modal-settings-hide-other").on("click",function(){"true"==sessionStorage.getItem("isOtherHidden")?(map.addLayer(r._P),sessionStorage.setItem("isOtherHidden","false"),this.innerHTML="verstecken"):(sessionStorage.setItem("isOtherHidden","true"),map.removeLayer(r._P),this.innerHTML="zeigen")}),$("#lssp-modal-settings-hide-all").on("click",function(){$("#lssp-modal-settings-hide-rd").trigger("click"),$("#lssp-modal-settings-hide-feu").trigger("click"),$("#lssp-modal-settings-hide-pol").trigger("click"),$("#lssp-modal-settings-hide-thw").trigger("click"),$("#lssp-modal-settings-hide-school").trigger("click"),$("#lssp-modal-settings-hide-other").trigger("click")})}[l,s,o,a,r]=c.then?(await c)():c,n()}catch(g){n(g)}})},896:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{T$:()=>u,fI:()=>d,h0:()=>r,qI:()=>o,ys:()=>a});var l=i(983),s=e([l]);function o(){return new Promise((e,t)=>{const i=indexedDB.open(sessionStorage.getItem("dbName")||"LSS-Planner",3);i.onerror=()=>{t(i.error)},i.onsuccess=()=>{e(i.result)},i.onupgradeneeded=e=>{const t=e.target.result.createObjectStore("buildings",{keyPath:"id",autoIncrement:!0});t.createIndex("id","id",{unique:!0}),t.createIndex("name","name",{unique:!1}),t.createIndex("type","type",{unique:!1})}})}function a(e,t){return new Promise((i,n)=>{const l=e.transaction(["buildings"],"readwrite").objectStore("buildings").put(t);l.onerror=()=>{n(l.error)},l.onsuccess=()=>{i()}})}function r(e,t){return new Promise((i,n)=>{const s=e.transaction(["buildings"],"readonly").objectStore("buildings").get(t);s.onerror=()=>{n(s.error)},s.onsuccess=()=>{var e=new l.P;e.set(s.result),i(e)}})}function d(e){return new Promise((t,i)=>{const n=e.transaction(["buildings"],"readonly").objectStore("buildings").getAll();n.onerror=()=>{i(n.error)},n.onsuccess=()=>{let e=[];n.result.forEach(t=>{var i=new l.P;i.set(t),e.push(i)}),t(e)}})}function u(e,t){return new Promise((i,n)=>{const l=e.transaction(["buildings"],"readwrite").objectStore("buildings").delete(t);l.onerror=()=>{n(l.error)},l.onsuccess=()=>{i()}})}l=(s.then?(await s)():s)[0],n()}catch(c){n(c)}})},983:(e,t,i)=>{i.a(e,async(e,n)=>{try{i.d(t,{P:()=>o});var l=i(197),s=e([l]);l=(s.then?(await s)():s)[0];class o{_id;_name;_type;_lat;_lng;_leitstelle;constructor(e=NaN,t="",i=NaN,n=NaN,l=NaN,s=NaN){this._id=e,this._name=t,this._type=i,this._lat=n,this._lng=l,this._leitstelle=s}set id(e){if("number"!=typeof e)throw new Error("id must be a number");this._id=e}get id(){return this._id}set name(e){if("string"!=typeof e)throw new Error("name must be a string");this._name=e}get name(){return this._name}set type(e){if("number"!=typeof e)throw new Error("type must be a number");this._type=e}get type(){return this._type}set lat(e){if("number"!=typeof e)throw new Error("lat must be a number");this._lat=e}get lat(){return this._lat}set lng(e){if("number"!=typeof e)throw new Error("lng must be a number");this._lng=e}get lng(){return this._lng}set leitstelle(e){if("number"!=typeof e)throw new Error("leitstelle must be a number");this._leitstelle=e}get leitstelle(){return this._leitstelle}set(e){this._id=1*e.id,this._name=e.name,this._type=1*e.type,this._lat=e.lat,this._lng=e.lng,e.leitstelle&&(this._leitstelle=1*e.leitstelle)}getWithoutID(){return{name:this._name,type:this._type,lat:this._lat,lng:this._lng,leitstelle:this._leitstelle}}setLatLng(e){this._lat=e.lat,this._lng=e.lng}get leitstellenName(){return new Promise((e,t)=>{$.getJSON("../api/buildings",t=>{const i=t.filter(e=>e.id==this._leitstelle),n=i[0]?.caption||"";e(n)}).fail((e,i,n)=>{t(n)})})}get typeName(){return this._type?l.z[this._type].caption:""}get iconURL(){return this._type?l.z[this._type].icon:""}getAllProperties(){return{id:this._id,name:this._name,type:this._type,lat:this._lat,lng:this._lng,leitstelle:this._leitstelle}}}n()}catch(e){n(e)}})}},r={};function d(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return a[e](i,i.exports,d),i.exports}e="function"==typeof Symbol,t=e?Symbol("webpack queues"):"__webpack_queues__",i=e?Symbol("webpack exports"):"__webpack_exports__",n=e?Symbol("webpack error"):"__webpack_error__",l=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},d.a=(e,s,o)=>{var a;o&&((a=[]).d=-1);var r,d,u,c=new Set,p=e.exports,g=new Promise((e,t)=>{u=t,d=e});g[i]=p,g[t]=e=>(a&&e(a),c.forEach(e),g.catch(e=>{})),e.exports=g,s(e=>{var s;r=(e=>e.map(e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var s=[];s.d=0,e.then(e=>{o[i]=e,l(s)},e=>{o[n]=e,l(s)});var o={};return o[t]=e=>e(s),o}}var a={};return a[t]=e=>{},a[i]=e,a}))(e);var o=()=>r.map(e=>{if(e[n])throw e[n];return e[i]}),d=new Promise(e=>{(s=()=>e(o)).r=0;var i=e=>e!==a&&!c.has(e)&&(c.add(e),e&&!e.d&&(s.r++,e.push(s)));r.map(e=>e[t](i))});return s.r?d:o()},e=>(e?u(g[n]=e):d(p),l(a))),a&&a.d<0&&(a.d=0)},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var i=Object.create(null);d.r(i);var n={};s=s||[null,o({}),o([]),o(o)];for(var l=2&t&&e;("object"==typeof l||"function"==typeof l)&&!~s.indexOf(l);l=o(l))Object.getOwnPropertyNames(l).forEach(t=>n[t]=()=>e[t]);return n.default=()=>e,d.d(i,n),i},d.d=(e,t)=>{for(var i in t)d.o(t,i)&&!d.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d(197)})();